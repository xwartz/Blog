{"componentChunkName":"component---src-templates-blog-post-js","path":"/beancount-best-practice/","result":{"data":{"site":{"siteMetadata":{"title":"XWARTZ","author":"xwartz"}},"markdownRemark":{"id":"1ba80b59-cc77-5f2a-89da-355582da9ef7","html":"<h2 id=\"beancount-是什么\"><a href=\"#beancount-%E6%98%AF%E4%BB%80%E4%B9%88\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Beancount 是什么</h2>\n<p><a href=\"https://github.com/beancount/beancount\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Beancount</a> 是一个开源的复式记账软件，使用 python 实现，可自己本地运行部署</p>\n<p>数据文件是 Plain Text，可以用喜欢的方式管理自己的账单数据</p>\n<h2 id=\"为什么需要记账\"><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%AE%B0%E8%B4%A6\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>为什么需要记账</h2>\n<p>有规律的记录自己的收入、负债、资产、花费情况，把这些记录留存，随着时间推移，累积历史数据</p>\n<p>当我们复盘回顾的时候，有了这些数据记录，可以轻易的了解过去，了解自己的消费习惯，记账是一个对我自己认知提升的方式</p>\n<p>当我们想分析当前的财务情况时，可以对着资金表格，清楚地知道资产分配、负债情况、净资产有多少</p>\n<p>当我们想规划未来时，看看在哪些方面的资产增长最快，更好的分配自己的资金、精力</p>\n<p>例如，工资收入是增长最快的，而投资的资产则是亏损，那么是否更应该把精力花在职业发展上呢？(可能更应该花精力学习投资 🤔)</p>\n<p>当我们想做预算时，可以从过去的花费情况里，更准确预计将来的花费，有心理预期，花多少钱都不慌 🙃</p>\n<p>有了记账后，可以获取资产占比报表，对于个人的投资理财也会方便很多，优化资金分配</p>\n<p>总之，记账之后让我更从容一些</p>\n<h2 id=\"为什么选择-beancount\"><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-beancount\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>为什么选择 Beancount</h2>\n<p>我之前 2-3 年使用的记账软件是「网易有钱」，当初选择记账软件大概有以下几点考量：</p>\n<ol>\n<li>漂亮的 UI</li>\n<li>支持数据导入、导出</li>\n<li>可视化：收入、支出、资产，变化图</li>\n<li>预算功能</li>\n<li>多账本</li>\n<li>信用卡数据同步</li>\n</ol>\n<p>「网易有钱」当时满足了(不完全)以上的 1、2、3、5、6，因为其他国内产品也各有缺点，所以只能将就</p>\n<p>放弃他的原因如下：</p>\n<ol>\n<li>导出功能需要会员，个人的数据竟然不让导出？(满屏广告了，还这么小气)</li>\n<li>预算功能在不断向他们提需求后，加上了简陋版</li>\n<li>资产变化图迟迟不增加</li>\n<li>信用卡数据同步 bug 不解决，有次出差，把打车费分类到「出差」，从此导入的交通费都被自动分类到「出差」🙃</li>\n</ol>\n<p>Beancount 的优点：</p>\n<ol>\n<li>开源工具，可自己修改定制 UI</li>\n<li>账本是基于文本的语法，数据自己掌握</li>\n<li>有丰富的图表，还可以根据 SQL 查询，生成报表</li>\n<li>支持预算</li>\n<li>支持无限账本，除了给自己记账，还可以帮家人记账</li>\n<li>可导入信用卡账单文件(其实可以任意文件，自己写脚本转化即可)</li>\n</ol>\n<p>此外，Beancount 可高度自定义，可自定义货币，因此可轻松应对不同币种账单，甚至可以用他记录所有的交易</p>\n<p>例如，可以把「年假」想象成交易，每年的「年假」相当于工作收入，从公司账户转账到个人账户，变成资产</p>\n<p>当请假时，相当于把「年假」消费出去了，因此，可以记录年假的「交易」，货币单位为「天」</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-04-24 * &quot;CompanyName&quot; &quot;请假一天休息&quot;\n  Assets:Leave                                 -1.00 DAY\n  Expenses:Health\n\n2019-04-01 * &quot;CompanyName&quot; &quot;年假-初始化&quot;\n  Income:Job:CompanyName:Leave\n  Assets:Leave                                 +7.00 DAY</code></pre></div>\n<p>选择 Beancount 的理由，也可以从作者创造 Beancount 的动机上了解，详情查看 <a href=\"https://docs.google.com/document/d/1e4Vz3wZB_8-ZcAwIFde8X5CjzKshE4-OXtVVHm4RQ8s/edit#heading=h.7r5losli85n7\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Command-line Accounting in Context</a></p>\n<h2 id=\"基本语法\"><a href=\"#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基本语法</h2>\n<p>以下只是一些经常使用到基本语法，完整语法查看文档：<a href=\"https://docs.google.com/document/d/1wAMVrKIA2qtRGmoVDSUBJGmYZSygUaR0uOMW1GV3YE0/edit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Beancount Language Syntax</a></p>\n<p>指令格式：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">YYYY-MM-DD &lt;directive&gt; &lt;arguments...&gt;</code></pre></div>\n<ol>\n<li>声明货币</li>\n</ol>\n<p>不是必须的，可以不定义</p>\n<p>定义币种 CNY，代表 China Yuan</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1949-10-01 commodity CNY\n  name: &quot;China Yuan&quot;</code></pre></div>\n<ol start=\"2\">\n<li>创建/关闭账户</li>\n</ol>\n<p>创建和关闭账户使用关键词 <code class=\"language-text\">open</code> 和 <code class=\"language-text\">close</code>，例如：</p>\n<p>2014-01-01 创建一个「人民币现金」账户</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2014-01-01 open Assets:Cash:CNY CNY\n2014-01-01 note Assets:Cash:CNY &quot;现金&quot;</code></pre></div>\n<p>2018-01-01 关闭人民币现金账户</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2018-01-01 close Assets:Cash:CNY</code></pre></div>\n<ol start=\"3\">\n<li>设置价格</li>\n</ol>\n<p>2019-01-01 当天，1 USD = 6.75 CNY</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-01-01 price USD   6.75 CNY</code></pre></div>\n<ol start=\"4\">\n<li>交易</li>\n</ol>\n<p>2019-01-01 在星巴克用花呗买了一杯红茶拿铁</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-01-01 * &quot;Eat&quot; &quot;星巴克-红茶拿铁&quot;\n  Liabilities:Huabei                          -33.00 CNY\n  Expenses:Eat</code></pre></div>\n<ol start=\"5\">\n<li>余额断言</li>\n</ol>\n<p>2019-01-01 招商信用卡欠款 5000 元人民币</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-01-01 balance Liabilities:CreditCard:CMD  -5000.00 CNY</code></pre></div>\n<ol start=\"6\">\n<li>余额自动调整</li>\n</ol>\n<p>2019-01-01 之前的人民币现金余额变化，自动使用 Opening-Balances 调整</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-01-01 pad Assets:Cash:CNY Equity:Opening-Balances</code></pre></div>\n<h2 id=\"开始使用-beancount\"><a href=\"#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8-beancount\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>开始使用 Beancount</h2>\n<p>在开始使用 Beancount 之前，有必要整体浏览一下官网文档 <a href=\"https://docs.google.com/document/d/1RaondTJCS_IUPBHFNdT8oqFKJjVJDsfsn6JEjBG04eA/edit#\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Beancount Documentation</a></p>\n<h3 id=\"安装\"><a href=\"#%E5%AE%89%E8%A3%85\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装</h3>\n<p>首先需要安装 <a href=\"http://python.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">python 3</a>，然后安装 <code class=\"language-text\">beancout</code>、<code class=\"language-text\">fava</code></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip3 <span class=\"token function\">install</span> beancount fava</code></pre></div>\n<p><a href=\"https://github.com/beancount/fava\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">fava</a> 是一个网页可视化工具，平常看报表都使用她</p>\n<p>文本编辑器推荐 <a href=\"https://github.com/microsoft/vscode\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">vscode</a>，再配合语法高亮插件 <a href=\"https://github.com/Lencerf/vscode-beancount\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">vscode-beancount</a> 即可</p>\n<h3 id=\"使用-git\"><a href=\"#%E4%BD%BF%E7%94%A8-git\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>使用 git</h3>\n<p>在 github 创建仓库，用于保存账本文件，使用 git 进行版本管理</p>\n<blockquote>\n<p>注意：请一定创建私密仓库，账单信息量巨大，属于很隐私的东西，避免泄露</p>\n</blockquote>\n<h3 id=\"目录\"><a href=\"#%E7%9B%AE%E5%BD%95\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>目录</h3>\n<p>创建如下目录结构：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">.\n├── README.md\n├── main.bean\n├── account\n│   ├── assets.bean\n│   ├── equity.bean\n│   ├── expenses.bean\n│   ├── income.bean\n│   ├── index.bean\n│   └── liabilities.bean\n└── txs\n    ├── 2018\n    │   └── index.bean\n    ├── 2019\n    │   ├── 01.bean\n    │   ├── 02.bean\n    │   ├── 03.bean\n    │   ├── 04.bean\n    │   ├── 05.bean\n    │   ├── 06.bean\n    │   ├── 07.bean\n    │   ├── 08.bean\n    │   ├── 09.bean\n    │   ├── 10.bean\n    │   ├── 11.bean\n    │   ├── 12.bean\n    │   ├── index.bean\n    │   └── invest.bean\n    └── index.bean</code></pre></div>\n<p>其中：</p>\n<p><code class=\"language-text\">main.bean</code>：为账单入口文件，该文件只用来 <code class=\"language-text\">include</code> 其他文件</p>\n<p><code class=\"language-text\">account</code>：账户目录，文件可按类型划分为收入、资产、负债、消费、初始金额</p>\n<p><code class=\"language-text\">txs</code>：存放交易，可以按年、月管理，方便记录和查找账单；有些特殊的可以按照类型单独创建，例如：投资账单</p>\n<p>每个大目录下都创建 <code class=\"language-text\">index.bean</code> 文件，作为目录入口来 <code class=\"language-text\">include</code> 其他文件</p>\n<h3 id=\"创建账户\"><a href=\"#%E5%88%9B%E5%BB%BA%E8%B4%A6%E6%88%B7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>创建账户</h3>\n<h4 id=\"收入账户\"><a href=\"#%E6%94%B6%E5%85%A5%E8%B4%A6%E6%88%B7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>收入账户:</h4>\n<p>可以是投资收入、工作收入、利息等</p>\n<p>例如：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">; --- 投资盈亏 ---\n2016-02-15 open Income:PnL\n2016-02-15 note Income:PnL &quot;盈亏&quot;\n\n2016-02-15 open Income:PnL:Fund\n2016-02-15 note Income:PnL:Fund &quot;基金&quot;\n\n2016-02-15 open Income:PnL:Stock\n2016-02-15 note Income:PnL:Stock &quot;股票&quot;\n\n2016-02-15 open Income:PnL:DigitalCy\n2016-02-15 note Income:PnL:DigitalCy &quot;数字货币&quot;\n; --- /投资盈亏 ---</code></pre></div>\n<p>工作收入使用 <code class=\"language-text\">CompanyName:Salary</code> 这样的分类，开户日期使用入职时间</p>\n<p>这样做的好处是，可以直观知道在某个公司期间的回报情况</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">; --- 工作 ---\n; Salary\n2016-10-24 open Income:Job:CompanyName:Salary USD,CNY\n2016-10-24 note Income:Job:CompanyName:Salary &quot;工资&quot;\n; Bonus\n2016-10-24 open Income:Job:CompanyName:Bonus USD,CNY\n2016-10-24 note Income:Job:CompanyName:Bonus &quot;奖金&quot;\n; --- /工作 ---</code></pre></div>\n<h4 id=\"负债账户\"><a href=\"#%E8%B4%9F%E5%80%BA%E8%B4%A6%E6%88%B7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>负债账户:</h4>\n<p>信用卡、花呗、应付款等</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">; 花呗\n2014-01-01 open Liabilities:Huabei CNY\n2014-01-01 note Liabilities:Huabei &quot;花呗&quot;\n; 信用卡\n2014-01-01 open Liabilities:CreditCard:CMB CNY\n2014-01-01 note Liabilities:CreditCard:CMB &quot;招商信用卡&quot;\n; 应付款\n2014-01-01 open Liabilities:Payables\n2014-01-01 note Liabilities:Payables &quot;应付款&quot;</code></pre></div>\n<h4 id=\"资产\"><a href=\"#%E8%B5%84%E4%BA%A7\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>资产:</h4>\n<p>现金、银行卡、理财产品、房子、车子、应收款等</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">; --- 现金 ---\n2014-01-01 open Assets:Cash\n2014-01-01 note Assets:Cash &quot;现金&quot;\n\n2014-01-01 open Assets:Cash:CNY CNY\n2014-01-01 note Assets:Cash:CNY &quot;现金-人民币&quot;\n\n2014-01-01 open Assets:Cash:USD USD\n2014-01-01 note Assets:Cash:USD &quot;现金-美元&quot;\n; --- / 现金 ---</code></pre></div>\n<h4 id=\"花费\"><a href=\"#%E8%8A%B1%E8%B4%B9\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>花费:</h4>\n<p>购物、交通、旅游等</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">; --- 购物 ---\n2014-01-01 open Expenses:Shopping\n2014-01-01 note Expenses:Shopping &quot;购物&quot;\n; --- /购物 ---</code></pre></div>\n<h3 id=\"数据迁移\"><a href=\"#%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>数据迁移</h3>\n<p>账户创建完之后，开始记录交易，但是如果有以前的账单数据，如果处理呢？我们需要将数据迁移过来</p>\n<blockquote>\n<p>在迁移数据之前，可以使用余额断言，记录各个账户当前的余额</p>\n</blockquote>\n<p>这样做的好处是，我们可以慢慢迁移老数据，又不影响使用 Beancount 记录后面发生的交易</p>\n<p>例如：</p>\n<p>在 2019-05-01 开始使用 Beancount，目前有港币现金 23000，招商银行余额 50000</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">; 现金\n2019-05-01 pad Assets:Cash:HKD Equity:Opening-Balances\n2019-05-01 balance Assets:Cash:HKD          23000.00 HKD\n\n2019-05-01 pad Assets:Cash:Bank:CMB Equity:Opening-Balances\n2019-05-01 balance Assets:Cash:Bank:CMB     50000.00 CNY</code></pre></div>\n<p>这样，在 2019-05-01 之前的数据变化不会影响账户余额了，而 2019-05-01 之后发生的交易可以使用 Beancount 正常记录</p>\n<p>当把 2019-05-01 之前的数据补充完整，账单变化即可在 Beancount 显示了</p>\n<p>数据迁移可使用官方提供的<a href=\"https://docs.google.com/document/d/11EwQdujzEo2cxqaF5PgxCEZXWfKKQCYSMfdJowp_1S8/edit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">导入插件</a>，或者手动迁移(记录重要的部分即可)</p>\n<h2 id=\"记录投资\"><a href=\"#%E8%AE%B0%E5%BD%95%E6%8A%95%E8%B5%84\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>记录投资</h2>\n<p>相比较现金的流水，投资理财的记录就难多了，投资理财很难用一个币种表示，因此需要创建很多货币单位</p>\n<blockquote>\n<p>以股票代号、代币符号作为货币单位更适合记录</p>\n</blockquote>\n<p>例如：阿毛在 2019-05-01 用 7000 人民币，买了 1000 个 USDT(一种数字货币)，然后用 USDT 买了 5 个 ETH(以太坊)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-05-01 * &quot;Huobi&quot; &quot;Buy 1000 USDT&quot;\n  Assets:DemandDeposit:YuEBao              -7000.00 CNY\n  Assets:DigitalCy:USDT                     1000.00 USDT {7 CNY} @@ 7000.00 CNY\n\n2019-05-01 * &quot;Huobi&quot; &quot;Buy 5 ETH&quot;\n  Assets:DigitalCy:USDT                   -1000.00 USDT\n  Assets:DigitalCy:ETH                      5.00 ETH {200 USDT} @@ 1000.00 USDT</code></pre></div>\n<p>过了一个月，阿毛想知道当前数字货币账户的价值时，可以使用 price 语句设置当前价格</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2019-06-01 price USDT  7 CNY\n2019-06-01 price ETH   300 USDT</code></pre></div>\n<p>Beancount 即可将 USDT、ETH 的价值转化为 CNY</p>\n<h2 id=\"预算\"><a href=\"#%E9%A2%84%E7%AE%97\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>预算</h2>\n<p>fava 支持预算功能，可按天、周、月、季度、年来规划</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2012-01-01 custom &quot;budget&quot; Expenses:Coffee       &quot;daily&quot;         4.00 EUR\n2013-01-01 custom &quot;budget&quot; Expenses:Books        &quot;weekly&quot;       20.00 EUR\n2014-02-10 custom &quot;budget&quot; Expenses:Groceries    &quot;monthly&quot;      40.00 EUR\n2015-05-01 custom &quot;budget&quot; Expenses:Electricity  &quot;quarterly&quot;    85.00 EUR\n2016-06-01 custom &quot;budget&quot; Expenses:Holiday      &quot;yearly&quot;     2500.00 EUR</code></pre></div>\n<p>如果是按月来做预算，那么可以在该月的文件开头设置这个月的预算(<em>任何地方都可以，只是为了查起来方便</em>)</p>\n<h2 id=\"多账本\"><a href=\"#%E5%A4%9A%E8%B4%A6%E6%9C%AC\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>多账本</h2>\n<p>生活中可能不止一个账本就可以完全记录</p>\n<p>例如：需要帮助爸妈记录账单，和自己账户不可共用，这时就需要新建另一个账本</p>\n<p>fava 支持多个账本同时显示，可在根目录创建另一个账本 <code class=\"language-text\">test.bean</code></p>\n<p>执行以下命令，即可在 fava 网页端切换多个账本</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">fava *.bean</code></pre></div>\n<h2 id=\"参考\"><a href=\"#%E5%8F%82%E8%80%83\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li><a href=\"https://docs.google.com/document/d/1RaondTJCS_IUPBHFNdT8oqFKJjVJDsfsn6JEjBG04eA/edit#heading=h.hzs9xa5699ul\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Beancount Documentation</a></li>\n<li><a href=\"https://github.com/wzyboy/awesome-beancount\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Awesome Beancount</a></li>\n<li><a href=\"https://wzyboy.im/post/1063.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Beancount —— 命令行复式簿记</a></li>\n<li><a href=\"https://wzyboy.im/post/1317.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">使用 Beancount 记录证券投资</a></li>\n<li><a href=\"/blog/beancount-best-practice/\">Beancount 最佳实践</a></li>\n</ul>","timeToRead":15,"frontmatter":{"title":"Beancount 最佳实践","date":"June 02, 2019","spoiler":"个人使用 Beancount 的最佳实践"},"fields":{"slug":"/beancount-best-practice/","langKey":"en"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/beancount-best-practice/","previous":{"fields":{"slug":"/start-up-from-new-mac/","langKey":"en","directoryName":"start-up-from-new-mac","maybeAbsoluteLinks":[]},"frontmatter":{"title":"重来：搭建开发环境"}},"next":{"fields":{"slug":"/developmemt-guidelines/","langKey":"en","directoryName":"developmemt-guidelines","maybeAbsoluteLinks":[]},"frontmatter":{"title":"团队开发规范"}},"translations":[],"translatedLinks":[]}}}